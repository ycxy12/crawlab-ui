<template>
  <cl-line-chart :config="getConfig()"/>
</template>

<script lang="ts">
import {defineComponent} from 'vue';

export default defineComponent({
  name: 'DemoLineChart',
  setup() {
    const getData = () => {
      const dataStr = '{"status":"ok","message":"success","data":[{"metric":{},"values":[[1647665390,"51.058722"],[1647665405,"51.276445"],[1647665420,"51.993704"],[1647665435,"51.625109"],[1647665450,"51.433277"],[1647665465,"51.77803"],[1647665480,"51.636648"],[1647665495,"51.061058"],[1647665510,"51.209211"],[1647665525,"51.170778"],[1647665540,"51.440716"],[1647665555,"51.343679"],[1647665570,"51.947689"],[1647665585,"51.832485"],[1647665600,"51.879358"],[1647665615,"52.006817"],[1647665630,"52.147436"],[1647665645,"52.1873"],[1647665660,"52.266741"],[1647665675,"52.698374"],[1647665690,"52.740669"],[1647665705,"52.195454"],[1647665720,"52.543592"],[1647665735,"52.400398"],[1647665750,"52.252388"],[1647665765,"52.045107"],[1647665780,"52.738619"],[1647665795,"52.109241"],[1647665810,"51.953745"],[1647665825,"51.98946"],[1647665840,"51.877546"],[1647665855,"52.442312"],[1647665870,"52.664709"],[1647665885,"52.198315"],[1647665900,"52.58317"],[1647665915,"52.342606"],[1647665930,"52.145243"],[1647665945,"51.952362"],[1647665960,"52.005386"],[1647665975,"51.93224"],[1647665990,"52.593136"],[1647666005,"52.734089"],[1647666020,"52.211952"],[1647666035,"52.159214"],[1647666050,"52.775526"],[1647666065,"52.786398"],[1647666080,"52.738953"],[1647666095,"52.535963"],[1647666110,"52.923584"],[1647666125,"52.149343"],[1647666140,"52.553368"],[1647666155,"52.677441"],[1647666170,"52.994585"],[1647666185,"52.552128"],[1647666200,"52.99902"],[1647666215,"52.631092"],[1647666230,"52.314091"],[1647666245,"52.148628"],[1647666260,"52.154779"],[1647666275,"52.131462"],[1647666290,"52.134228"],[1647666305,"52.139139"],[1647666320,"52.194452"],[1647666335,"52.187681"],[1647666350,"52.144909"],[1647666365,"52.103901"],[1647666380,"52.208948"],[1647666395,"52.943945"],[1647666410,"52.943945"],[1647666425,"52.943945"],[1647666440,"52.943945"],[1647666455,"52.253151"],[1647666470,"52.244329"],[1647666485,"52.244329"],[1647666500,"52.244329"],[1647666515,"52.244329"],[1647666530,"52.244329"],[1647666545,"52.244329"],[1647666560,"52.244329"],[1647666575,"52.244329"],[1647666590,"52.244329"],[1647666605,"52.244329"],[1647666620,"52.244329"],[1647666635,"52.244329"],[1647666650,"52.244329"],[1647666665,"52.244329"],[1647666680,"52.244329"],[1647666695,"52.244329"],[1647666710,"52.244329"],[1647666725,"52.244329"],[1647666740,"52.244329"],[1647666755,"52.244329"],[1647667565,"52.14715"],[1647667580,"52.474022"],[1647667595,"52.474022"],[1647667610,"52.474022"],[1647667625,"52.474022"],[1647667640,"52.474022"],[1647667655,"52.474022"],[1647667670,"52.474022"],[1647667685,"52.474022"],[1647667700,"52.474022"],[1647667715,"52.474022"],[1647667730,"52.474022"],[1647667745,"52.474022"],[1647667760,"52.474022"],[1647667775,"52.474022"],[1647667790,"52.474022"],[1647667805,"52.474022"],[1647667820,"52.474022"],[1647667835,"52.474022"],[1647667850,"52.474022"],[1647667865,"52.474022"],[1647668510,"52.297354"],[1647668525,"52.377605"],[1647668540,"52.377605"],[1647668555,"52.617598"],[1647668570,"52.294827"],[1647668585,"52.259302"],[1647668600,"52.895689"],[1647668615,"52.738714"],[1647668630,"52.823448"],[1647668645,"52.345371"],[1647668660,"52.234745"],[1647668675,"52.670145"],[1647668690,"54.468918"],[1647668705,"54.268026"],[1647668720,"54.007578"],[1647668735,"53.814888"],[1647668750,"54.184151"],[1647668765,"53.936291"],[1647668780,"54.740524"],[1647668795,"54.247713"],[1647668810,"53.945589"],[1647668825,"54.870319"],[1647668840,"53.854847"],[1647668855,"54.886532"],[1647668870,"54.41494"],[1647668885,"54.018545"],[1647668900,"55.034065"],[1647668915,"54.0833"],[1647668930,"54.235411"],[1647668945,"54.593801"],[1647668960,"53.625965"],[1647668975,"54.654598"],[1647668990,"54.032898"],[1647669005,"54.571056"],[1647669020,"53.702545"],[1647669035,"54.378366"],[1647669050,"53.923225"],[1647669065,"54.685163"],[1647669080,"54.335165"],[1647669095,"53.762579"],[1647669110,"53.711033"],[1647669125,"54.227448"],[1647669140,"54.611444"],[1647669155,"54.754972"],[1647669170,"54.681826"],[1647669185,"53.746223"],[1647669200,"52.792406"],[1647669215,"53.60465"],[1647669230,"53.221178"],[1647669245,"54.257011"],[1647669260,"53.622007"],[1647669275,"54.106522"],[1647669290,"53.910446"],[1647669305,"53.423834"]]}],"error":""}';
      const data = JSON.parse(dataStr);
      return data.data?.[0]?.values?.map((d: any) => {
        return {
          date: d[0] * 1e3,
          value: Number(d[1]),
        };
      });
    };

    const getConfig = (): EChartsConfig => {
      return {
        option: {
          title: {
            text: 'Demo Line Chart'
          },
          backgroundColor: '#ffffff',
          yAxis: {
            scale: true,
          },
          tooltip: {
            axisPointer: {
              type: 'cross',
              axis: 'x',
            }
          }
        },
        data: getData(),
      };
    };

    return {
      getData,
      getConfig,
    };
  }
});
</script>

<style lang="scss" scoped>
</style>
